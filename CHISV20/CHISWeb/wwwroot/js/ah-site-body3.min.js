function isShowRegisterSource(n){var i=$("#register_source").parent(),t=i.find(".ah-register-source-wrap").first();n?(t.show().addClass("layui-anim-upbit"),$("#register_source_search")[0].focus()):t.hide().removeClass("layui-anim-upbit")}function registerSource(n){var t=$("#register_source").parent().find("dl").first();$.get("/openapi/Common/JetNotDoctorOfStation",{stationId:n,searchText:$("#register_source_search").val(),principalshipId:12999},function(n){var r="",i;if(n.doctors.length<=0)r+="<dd>暂无数据<\/dd>";else for(i=0;i<n.doctors.length;i++)r+="<dd class='register_source_item' ah-opMan='"+n.doctors[i].doctorName+"'ah-opId='"+n.doctors[i].doctorOpId+"'>"+n.doctors[i].doctorName+" ("+n.doctors[i].postTitleName+")<\/dd>";t.html(r)})}function autoScrollTop(n){var t=$(n.currentTarget);t.hasClass("ah-date")||setTimeout(function(){var n=t.offset().top,i=$('body[ah-body="wrap"]').find(".scroll-content").scrollTop();$('body[ah-body="wrap"]').find(".scroll-content").first().scrollTop(n+i-30)},1200)}function setAgeDay(n,t){var u=t.value,i=new Date,f=new Date(i.getFullYear()-u,i.getMonth(),1),r;$(n).val(f.formatDateTime("yyyy-MM-dd"));r=14+(t.max-t.min)/$(t).width()*t.value;$(t).parent().find("i").text(t.value).css("left",r+"px")}function changeStation(){var n=$.open({skin:"change-station",type:2,title:!1,shadeClose:!0,shade:.99,area:["80%","80%"],content:"/home/ChangeStation"})}function ahNavMore(n,t){if(n)$(".ah-navmore-new").removeClass("ah-navmore-show");else return t.stopPropagation(),$(".ah-nav-user-info").hide(),$(".ah-navmore-new").hasClass("ah-navmore-show")?$(".ah-navmore-new").removeClass("ah-navmore-show"):$(".ah-navmore-new").addClass("ah-navmore-show"),!1}function dateChangeRange(n){var u=new XDate,i=u.getFullYear()-parseInt($(n).val().substring(0,4)),t=$(n).parent().parent().find("input[type='range']"),r;t.val(i);r=14+(t[0].max-t[0].min)/t.width()*i;t.parent().find("i").text(i).css("left",r+"px")}function changeDep(){console.log(depItem);depItem?$(".select-dep-items").hide():$(".select-dep-items").show();depItem=!depItem}function ahTools(){$("#J_selector").toggle()}var AH_UPDATAPIC_SIZE_WIDTH=800,AH_UPDATAPIC_SIZE_HEIGHT=1280,depItem;$(function(){var n=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,t=$(window).height();if(n){$("input").on("focus click",function(n){autoScrollTop(n)});$("textarea").on("focus click",function(n){autoScrollTop(n)})}$.InitNavTouch();$(window).resize(function(){$.InitNavTouch()});$("input[type='checkbox']").each(function(){$(this).attr("lay-skin","primary")});$(document).click(function(){$(".ah-nav-user-info").hide();$(".ah-navmore-new").removeClass("ah-navmore-show")});$(".ah-user-info").click(function(n){n.stopPropagation();$(".ah-navmore-new").removeClass("ah-navmore-show");depItem=!0;changeDep();var t=$(".ah-nav-user-info");return t.is(":hidden")?t.show():t.hide(),!1});$(".ah-navtouch-more span").click(function(n){ahNavMore(null,n)});$(".owl-more").click(function(n){ahNavMore(null,n)});layui.use(["form","element","laydate"],function(){var n=layui.jquery,r=layui.element,t=layui.laydate,i=layui.form;n.InitTabCallback=function(n,t){r.on("tab("+t+")",function(t){n(t)})};i.on("checkbox",function(n){jQuery.isFunction(n.elem.onchange)&&n.elem.onchange()});i.on("radio",function(n){jQuery.isFunction(n.elem.onchange)&&n.elem.onchange()});i.on("select",function(t){$s=n(t.elem);"1"+$s.val()!="1"?($s.removeClass("input-validation-error"),$s.parent().find(".field-validation-error").hide()):($s.addClass("input-validation-error"),$s.parent().find(".field-validation-error").show());jQuery.isFunction(t.elem.onchange)&&t.value!="null"&&t.value!=""&&t.elem.onchange()});lay(".ah-date-show").each(function(){t.render({elem:this,position:"static",showBottom:!1,calendar:!0,done:function(n,t){console.log("你选择的日期是："+n+"<br>获得的对象是"+JSON.stringify(t))}})});lay(".ah-date-icon").each(function(){var i=n(this),r=n.returnDateID("dataIcon"),f=n("<i class='ah-dateIcon' id='"+r+"' ><\/i>"),u;i.parent().append(f);u={elem:this,calendar:!0,eventElem:"#"+r,trigger:"click",showBottom:!1,done:function(t){var r=i.attr("for-event");n("#"+r).val(t)}};t.render(u);i.keydown(function(n){if(n.keyCode==13)return!1})});lay(".ah-date").each(function(){var i={elem:this,calendar:!0},r;n(this).attr("ah-max-date")&&(i.max=n(this).attr("ah-max-date"));n(this).attr("ah-min-date")&&(i.min=n(this).attr("ah-min-date"));n(this).attr("ah-date-age")&&(r=new XDate,i.max=r.toString("yyyy-MM-dd"),i.min=r.getFullYear()-90+"-"+(parseInt(r.getMonth())+1)+"-1");i.done=function(){jQuery.isFunction(n(i.elem)[0].onchange)&&n(i.elem)[0].onchange()};t.render(i)});lay(".ah-date-time").each(function(){t.render({elem:this})});lay(".ah-date-range").each(function(){var r=this,i={elem:this,range:"～",format:"yyyy年MM月dd日",done:function(t,i,u){if(t){var f=i.year+"-"+i.month+"-"+i.date,e=u.year+"-"+u.month+"-"+u.date,o="dt0={0};dt1={1};".format(f,e);n(r).attr("data-val",o).attr("data-val-dt0",f).attr("data-val-dt1",e)}else n(r).attr("data-val","").attr("data-val-dt0","").attr("data-val-dt1","")}};n(this).attr("ah-format")&&(i.format=n(this).attr("ah-format"));n(this).attr("ah-type")&&(i.type="datetime");n(this).attr("ah-max-date")&&(i.max=n(this).attr("ah-max-date"));n(this).attr("ah-min-date")&&(i.min=n(this).attr("ah-min-date"));t.render(i)})});$("body[ah-body='wrap']").on("click",".register_source_item",function(){var n=$(this),t;$(".register_source_item").each(function(){$(this).removeClass("layui-this")});$(n).addClass("layui-this");t=$("#register_source_search").attr("ah-outInputId");$("#"+t).val(n.attr("ah-opid"));$("#register_source").val(n.attr("ah-opman"));isShowRegisterSource(!1)});$(document).on("click touchstart",function(n){n=window.event||n;obj=$(n.srcElement||n.target);$(obj).parents(".ah-register-source-wrap").first().length<=0&&$(obj).attr("id")!="register_source"&&($(obj).hasClass("ah-register-source-wrap")||$(".ah-register-source-wrap").hide().removeClass("layui-anim-upbit"))});$("body[ah-body='wrap']").on("keypress","#register_source_search",function(n){if(n.which==13)return registerSource(),!1});$("body[ah-body='wrap']").on("focus","#register_source",function(){isShowRegisterSource(!0)})});$.InitNavTouch=function(){var n=$(".owl-carousel"),t=$(".ah-touchNav-items");$(document).width()<=450?(n.owlCarousel({autoWidth:!0,loop:!1,margin:10}),t.hide(),n.show()):(t.show(),n.hide())};$.onTab=function(n,t){$("div[lay-filter='"+t+"'] .layui-tab-title li").on("click",function(){jQuery.isFunction($.InitTabCallback)?$.InitTabCallback(function(t){n(t)},t):layer.msg("模块加载中，请稍后！",{time:1e3})})};$.onRadio=function(n){layui.use(["form"],function(){var t=layui.form;t.on("radio",function(t){n(t)})})};$.updataAllLayui=function(){top.layui.form?top.layui.form.render():console.log("初始化layui优先级错误！")};$.updataLayui=function(){layui.form.render();$(".ah-date").each(function(){var n={elem:this};$(this).attr("ah-max-date")&&(n.max=parseInt($(this).attr("ah-max-date")));$(this).attr("ah-min-date")&&(n.min=parseInt($(this).attr("ah-min-date")));layui.laydate.render(n)});$(".ah-date").unbind("focus").bind("focus",function(){$(this).hasClass("ah-data-can-input")||document.activeElement.blur()})};$.layuiTabSelect=function(n,t){layui.element.tabChange(n,t)};$.addSelectOption=function(n,t){var r,i;if(t.length<=0)return"<option value=''>暂无数据<\/option>";for(r="<option value=''>"+n+"<\/option>",i=0;i<t.length;i++)r+="<option value='"+t[i].doctorId+"'>"+t[i].doctorName+"<\/option>";return r};$.layui3LevelAddress=function(n){var i=n.$province,r=n.$city,u=n.$county,t,e,o,s,f;i.length!=0&&(layui.use(["form"],function(){var r=layui.jquery,i=layui.form;i.on("select(province)",function(){t.setCitys()});i.on("select(city)",function(){t.setCounties()});i.on("select(county)",function(){n.$val.val(u.val())})}),t={getAreaInfo:function(n){var r=CHINAAREAIDS,u=0,f=0,e=0,t=lumbdaFind(r,"Id",n),i;return t!=null&&(e=t.Id,t.PId>0&&(f=t.PId,i=lumbdaFind(r,"Id",t.PId),i!=null&&i.PId>0&&(u=i.PId))),{level0Id:u,level1Id:f,level2Id:e}},optItem:function(n,t,i){return t==undefined&&(t=""),i?"<option value='"+t+"' selected='selected'  >"+n+"<\/option>":"<option value='"+t+"'  >"+n+"<\/option>"},setProvince:function(n,r){i.empty().append(t.optItem("--请选择省级--"));$.each(CHINAAREA,function(n,r){i.append(t.optItem(r.AreaName,r.AreaId))});n&&i.val(n);r?r():layui.form.render("select")},setCitys:function(n,f){var e,o;r.empty().append(t.optItem("--请选择市--"));u.empty().append(t.optItem("--请选择区--"));e=i.val();e&&(o=lumbdaFind(CHINAAREA,"AreaId",i.val()).Children,$.each(o,function(n,i){r.append(t.optItem(i.AreaName,i.AreaId))}),n&&r.val(n),f&&f());f||layui.form.render("select")},setCounties:function(n,f){var e,o;u.empty().append(t.optItem("--请选择区--"));e=r.val();e&&(o=lumbdaFind(lumbdaFind(CHINAAREA,"AreaId",i.val()).Children,"AreaId",r.val()).Children,$.each(o,function(n,i){u.append(t.optItem(i.AreaName,i.AreaId))}),n&&u.val(n),f&&f());f||layui.form.render("select")}},e=n.$val.val(),e?(i.hide(),r.hide(),u.hide(),o=!1,s=!1,typeof i.attr("disabled")!="undefined"&&(o=!0,i.removeAttr("disabled"),r.removeAttr("disabled"),u.removeAttr("disabled")),typeof i.attr("readonly")!="undefined"&&(s=!0),f=t.getAreaInfo(e),t.setProvince(f.level0Id,function(){t.setCitys(f.level1Id,function(){t.setCounties(f.level2Id,function(){})})}),o&&(i.attr("disabled",""),r.attr("disabled",""),u.attr("disabled","")),s&&(i.attr("disabled",""),r.attr("disabled",""),u.attr("disabled",""),i.attr("readonly",""),r.attr("readonly",""),u.attr("readonly",""))):(t.setProvince(null,function(){}),r.empty().append(t.optItem("--请选择市--")),u.empty().append(t.optItem("--请选择区--"))))};$.layuiRangeDate=function(n,t,i){var r=new XDate(n).toString("yyyy年MM月dd日"),u=new XDate(date2).toString("yyyy年MM月dd日");$(i).val(r+" ～ "+u)};depItem=!1;$.fn.ahPages=function(n,t,i){n!=0?$("#pager").pager({pagenumber:t,pagecount:i,buttonClickCallback:function(n){SEARCH.search(n)}}):$("#pager").html("")};$.updataScrollbar=function(){$(".scrollbar-dynamic").each(function(){$(this).scrollbar()})};$.loading=function(n,t){var r=top.$("#loadingPage"),i=r.find(".loading-content");n?r.show():i.attr("istableloading")==undefined&&r.hide();t?i.html(t):i.html("数据加载中，请稍后…");i.css("left",(top.$("body").width()-i.width())/2-50);i.css("top",(top.$("body").height()-i.height())/2)};$.fn.formValid=function(){return $(this).valid({errorPlacement:function(n,t){t.parents(".formValue").addClass("has-error");t.parents(".has-error").find("i.error").remove();t.parents(".has-error").append('<i class="form-control-feedback fa fa-exclamation-circle error" data-placement="left" data-toggle="tooltip" title="'+n+'"><\/i>');$("[data-toggle='tooltip']").tooltip();t.parents(".input-group").hasClass("input-group")&&t.parents(".has-error").find("i.error").css("right","33px")},success:function(n){n.parents(".has-error").find("i.error").remove();n.parent().removeClass("has-error")}})};$.submitForm=function(n){var n=$.extend({url:"",param:[],loading:"正在提交数据...",success:null,close:!0},n);$.loading(!0,n.loading);window.setTimeout(function(){$("[name=__RequestVerificationToken]").length>0&&(n.param.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val());$.ajax({url:n.url,data:n.param,type:"post",dataType:"json",success:function(t){$.loading(!1);t.rlt&&(t.state=t.rlt?"success":"error");t.msg&&(t.message=t.msg||"操作成功");t.state=="success"?(n.success(t),$.modalMsg(t.message,t.state),n.close==!0&&$.modalClose()):$.modalAlert(t.message,t.state)},error:function(n,t,i){$.loading(!1);$.modalMsg(i,"error")},beforeSend:function(){$.loading(!0,n.loading)},complete:function(){$.loading(!1)}})},500)};$.confirm=function(n,t,i,r){var u=layer.confirm(t,{title:n,skin:"ah-myskin-blue"},function(){i&&i();layer.close(u)},function(){r&&r()})};$.modalAlert=function(n,t){var i=0;switch(t){case"success":i=1;break;case"error":i=2;break;case"warning":i=0;break;default:i=0}top.layer.alert(n,{icon:i,title:"系统提示",btn:["确认"],btnclass:["btn btn-primary"]})};$.alertMsg=function(n){layer.alert(n,{title:"提示"})};$.alertError=function(n){layer.alert(n,{icon:2,title:"失败错误"})};$.alertWarning=function(n){layer.alert(n,{icon:0,title:"警告"})};$.alertOK=function(n){layer.alert(n,{icon:1,title:"成功提示"})};$.msg=$.msgok=function(n){layer.msg(n)};$.err=$.error=function(n){console.log(n);layer.msg(n,{icon:"-err",skin:"ah-layer-err"})};$.ok=function(n){layer.msg(n,{icon:"-ok",skin:"ah-layer-ok"})};$.open=function(n){var t=document.body.clientWidth,u=t<801,i=$(document).height(),r=$(document).width();return n.area=n.area?t>0&&t<=800?["100%","100%"]:n.area||[r*.86+"px",i*.96+"px"]:t>0&&t<=800?[r+"px",i+"px"]:t>800&&t<=1280?[r*.9+"px",i*.9+"px"]:n.area||[r*.86+"px",i*.96+"px"],n.skin=n.skin||"ah-layer-open",n.resize=!1,n.title||(n.title=!1),top.layer.open(n)};$.openAdd=function(n){var t=$.open({type:2,title:n.title||"添加",content:n.content,btn:["添加","取消"],yes:function(t,i){var r=top.window[i.find("iframe")[0].name];r.submitForm({sendSuccess:function(i){i.rlt?n.sendSuccessTrue&&n.sendSuccessTrue(i,t):$.err("添加失败"+i.msg)},sendFailed:function(){$.err("传输数据失败！")}})}})};$.openNav=function(n){var t=$.open({type:2,title:n.title||"设置向导",content:n.content,btn:null})};$.thisLayerIndex=function(){return parent.layer.getFrameIndex(window.name)};$.closeThisLayer=function(n){parent.layer.close(parent.layer.getFrameIndex(n.name))};$.deleteData=function(n){n.alertText=n.alertText||"是否删除该数据？";$.confirm("删除确认",n.alertText,function(){$.post(n.url,n.data,function(t){t.rlt?n.fnSuccess&&n.fnSuccess(t):$.err("删除错误:"+t.msg)})})};$.revalidate=function(n){$.validator.unobtrusive.parse(n)};$.keydownEnter=function(n,t){n.keyCode==13&&t&&t()};$.moreToggle=function(n,t){var r=typeof n=="string"?$(n):n,i;r.toggle();$i=$(t).find("i.fa");$i.hasClass("fa-angle-double-down")?$i.removeClass("fa-angle-double-down").addClass("fa-angle-double-up"):$i.hasClass("fa-angle-double-up")?$i.removeClass("fa-angle-double-up").addClass("fa-angle-double-down"):$i.hasClass("fa-angle-double-right")?$i.removeClass("fa-angle-double-right").addClass("fa-angle-double-left"):$i.hasClass("fa-angle-double-left")&&$i.removeClass("fa-angle-double-left").addClass("fa-angle-double-right");i=$(t).text();i.indexOf("展开")>=0?$(t).text(i.replace("展开","收起")):i.indexOf("收起")>=0&&$(t).text(i.replace("收起","展开"))};$.str=function(n){return n==undefined||n==null?"":n.toString()};$.ahECharts=function(n,t){var i=echarts.init(document.getElementById(t));option={title:{text:n.title,subtext:n.titleSmall,x:"center"},tooltip:{trigger:"axis"},legend:{data:["最高气温","最低气温"],left:"center",bottom:"0"},xAxis:{type:"category",boundaryGap:!1,data:n.xAxisData},yAxis:{type:"value",axisLabel:{formatter:"{value}"+n.yUnit}},series:n.series};i.setOption(option)};$.ahPieChart=function(n,t){var i=echarts.init(document.getElementById(t));return option={title:{text:n.title,subtext:n.titleSmall,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"0",data:n.legendData},series:[{name:n.seriesName,type:"pie",radius:"55%",center:["50%","60%"],data:n.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},i.setOption(option),i};$.returnDateID=function(n){return n+"_"+(new Date).valueOf()};$.returnNullText=function(n){return n==null?"":n};$.localUpdataPic=function(n,t){n.addEventListener("change",function(){var i,u,r;if(n.files.length===0){$.err("请选择图片");return}if(i=n.files[0],!new RegExp("(jpg|jpeg|png)+","gi").test(i.type)){$.err("照片上传：文件类型必须是JPG、JPEG、PNG");return}u=layer.load(1,{shade:[.7,"#000"]});r=new FileReader;r.onload=function(n){var r=n.target.result,f;console.log("原始图片SIZE="+(i.size/1024).toFixed(2)+"KB");f=ImageResizer({resizeMode:"auto",dataSource:r,dataSourceType:"base64",maxWidth:AH_UPDATAPIC_SIZE_WIDTH,maxHeight:AH_UPDATAPIC_SIZE_HEIGHT,onTmpImgGenerate:function(){},success:function(n){console.log("处理过的图片SIZE="+(n.length*.8/1024).toFixed(2)+"KB");setTimeout(function(){var r={image_base64:n,file_name:i.name};$.postJson("/openapi/Picture/UploadBase64",r,function(n){layer.close(u);n.rlt?t(n):$.err(n.msg)})},100)},debug:!0})};r.readAsDataURL(i)},!1)};$(function(){typeof pagedata!="undefined"&&pagedata.isView&&($("input[type=text],input[type=password],input[type=number],input[type=date],input[type=checkbox],input[type=email],textarea").prop("readonly",!0),$(".status3 select,select").attr("readonly","readonly"),$(".input-group.input-display").attr("readonly",""));$(".scrollbar-dynamic").each(function(){$(this).scrollbar()});$(".ah-date").focus(function(){$(this).hasClass("ah-data-can-input")||document.activeElement.blur()});$.extend($.validator.defaults,{ignore:""});$(document).on("submit","[ah-role-method]",function(n){var t=this,i,r;try{$(this).ajaxSubmit({beforeSubmit:function(n,i){var f=$.param(n),e=i[0],r=$(t).find('[ah-role-validate="require_one"]'),u;return r.length>0&&(u=!1,r.find("input[type=text]").each(function(n,t){u=u||$(t).val().length>0}),!u)?(r.find("[ah-val=ONE_RQUIRED]").size()==0&&r.append("<span ah-val='ONE_RQUIRED' class='field-validation-error'>必须至少填写一个数据<\/span>"),!1):i.valid()},success:function(n){var i=$(t).attr("ah-success-callback"),r;i&&(r=eval(i),new r(n,t))},dataType:"json",timeout:3e3})}catch(u){$.err("出错:"+u);i=$(this).attr("ah-fail-callback");i&&(r=eval(i),new r(n,this))}finally{return n.stopPropagation(),!1}});$("[ah-role-validate=require_one]>input[type=text]").on("change",function(){});$.postJson=function(n,t,i){$.ajax({type:"POST",url:n,data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(n){i(n)}})}});
//# sourceMappingURL=ah-site-body3.min.js.map